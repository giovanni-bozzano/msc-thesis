\chapter{Experiments}
\label{ch:experiments}

In this chapter we cover the experiments performed on CBT and LKT-FM. We describe the datasets and data split, the used hyperparamenters and the goals of the experiments.\\
The first section summarizes the previous experiments performed on CBT.\\
The second and third sections cover the new experiments performed on CBT and LKT-FM.



\section{Previous Experiments}

In 2014, Cremonesi and Quadrana \cite{10.1145/2645710.2645769} performed experiments on CBT to evaluate its performance in recommendations. According to them, CBT is not able to transfer knowledge between non-overlapping domains. In their experiments, they provided an alternative explaination based on three points to the apparent increase of accuracy obtained with CBT:
\begin{itemize}
\item Empirical proof that CBT can improve accuracy without transferring knowledge.
\item The the injection of the codebook in the target domain is equivalent to a two-matrix factorization algorithm without transfer of knowledge from the source domain.
\item The increase apparent increase accuracy is due to a pitfall in the evaluation procedure, as it compares a user-based nearest neighborhood algorithm (before the injection) with a matrix factorization algorithm (after the injection) and matrix factorization is known to outperform kNN.
\end{itemize}
To reach these conclusions, Cremonesi and Quadrana implemented the CBT algorithm in MATLAB and performed five experiments on three different datasets. The experiments were the following:
\begin{itemize}
\item \textbf{kNN}: user-based $k$-nearest neighborhood with Pearson correlation. Recommendations are extracted from the target domain without codebook transfer, with $k = 20$. The missing ratings are filled with the average of the ratings.
\item \textbf{CBT}: the codebook transfer approach with 50 user and item clusters, followed by kNN.
\item \textbf{RND}: a "false" codebook containing random ratings is transferred using the codebook transfer approach with 50 user and item clusters, followed by kNN.
\item \textbf{AsySVD}: a "false" codebook containing ratings generated with the Asymmetric SVD matrix factorization algorithm \cite{10.1145/1401890.1401944} is transferred using the codebook transfer approach with 50 user and item clusters, followed by kNN.
\item \textbf{GE}: a "false" codebook containing ratings generated with the global effects method \cite{10.1145/1401890.1401944} is transferred using the codebook transfer approach with 50 user and item clusters, followed by kNN.
\end{itemize}


\subsection{Datasets}

Cremonesi and Quadrana performed experiments on MovieLens, Netflix and BookCrossing. Each dataset was used as a target domain, while MovieLens and Netflix were used as source domain.\\
The datasets were preprocessed in the following way:
\begin{itemize}
\item The ratings of BookCrossing are normalized to 1-5 to be in the same range of MovieLens and Netflix.
\item For each dataset, 500 users with at least 40 ratings and 1000 items are selected.
\item For each target dataset, 200 users are randomly removed to form the test set.
\item For each user in the test set, 15 ratings are randomly removed to form the validation set.
\end{itemize}


\subsection{Results}

According to the MAE and RMSE metrics, CBT outperfors the kNN baseline in all the dataset combinations. Surprisingly their results underlined a similar accuracy by transferring a randomly filled codebook.
\begin{table}[hbtp]
\centering
\begin{tabulary}{1.0\textwidth}{|L|CCCCC|}
\hline
\multicolumn{6}{|c|}{MovieLens $\rightarrow$ BookCrossing} \\
\hline
& kNN & CBT & RND & AsySVD & GE \\
\hline
MAE & 0.5216 & \textbf{0.5064} & \textbf{0.4963} & \textbf{0.5089} & \textbf{0.5109} \\
RMSE & 0.4736 & 0.4492 & \textbf{0.4380} & 0.4556 & 0.4578 \\
\hline
\hline
\multicolumn{6}{|c|}{MovieLens $\rightarrow$ Netflix} \\
\hline
& kNN & CBT & RND & AsySVD & GE \\
\hline
MAE & 0.7285 & \textbf{0.7090} & \textbf{0.7047} & \textbf{0.7085} & \textbf{0.7124} \\
RMSE & 0.8630 & \textbf{0.8208} & \textbf{0.8149} & \textbf{0.8245} & \textbf{0.8313} \\
\hline
\hline
\multicolumn{6}{|c|}{Netflix $\rightarrow$ BookCrossing} \\
\hline
& kNN & CBT & RND & AsySVD & GE \\
\hline
MAE & 0.5580 & \textbf{0.5456} & \textbf{0.5388} & \textbf{0.5474} & \textbf{0.5486} \\
RMSE & 0.5437 & \textbf{0.5231} & \textbf{0.5113} & \textbf{0.5269} & \textbf{0.5290} \\
\hline
\hline
\multicolumn{6}{|c|}{Netflix $\rightarrow$ MovieLens} \\
\hline
& kNN & CBT & RND & AsySVD & GE \\
\hline
MAE & 0.7640 & \textbf{0.7446} & \textbf{0.7425} & \textbf{0.7397} & \textbf{0.7417} \\
RMSE & 0.9388 & \textbf{0.8988} & \textbf{0.8932} & \textbf{0.8915} & \textbf{0.8935} \\
\hline
\end{tabulary}
\caption{Accuracy of different methods. Bold numbers are significantly different from the baseline method kNN. https://doi.org/10.1145/2645710.2645769}
\end{table}
For this reason, Cremonesi and Quadrana concluded that the obtained accuracy does not depend on the transferred knowledge but on the codebook transfer methodology described in \autoref{ss:codebook-transfer}. The structure of the optimization problem closely resembles regularized SVD matrix factorization, as the minimization is performed only on the non-zero elements of the user-rating matrix \cite{10.1145/1401890.1401944}:
\begin{equation*}
\min_{U_T \geq 0, V_T \geq 0} \norm{X_T - U_T V_T^T}^2
\end{equation*}
The difference is in the presence of the codebook $B$ and constraints on $U_T$ and $V_T$.\\
According to Cremonesi and Quadrana, this step of codebook transfer is equivalent to the training of a matrix factorization algorithm, provided that $B$ has a wide enough range of ratings to account for the constraints imposed on $U_T$ and $V_T$.



\section{CBT: Preprocessed Datasets}


\subsection{Datasets}


\subsection{Hyperparameters}



\section{CBT: Public Datasets}

The following section covers CBT experiments performed on well known datasets in the field of recommender systems.\\
Experiments are run over 3 folds for each combination of source and target domains.\\
A bayesian optimization process is performed on each fold by using the validation set, with 50 iterations and 15 random starts. The final run is performed using the test set with the hyperparameters of the best iteration. The metrics of its results are reported with a cutoff of 20.\\
To compare the results, the following baseline recommender systems are used with the same datasets:
\begin{itemize}
\item \textbf{Random}: random items are chosen for recommendation.
\item \textbf{TopPop}: the most popular items are chosen for recommendation.
\item \textbf{kNN}: the same kNN approach used in CBT is applied without codebook transfer, on the original target dataset. Both Pearson and cosine similarities are used and bayesian optimization is applied.
\item \textbf{fCBT}: codebook construction, codebook transfer and kNN are applied like in CBT, but the codebook is extracted from the target domain. Both Pearson and cosine similarities are used and bayesian optimization is applied.
\end{itemize}


\subsection{Datasets}

\begin{itemize}
\item \textbf{MovieLens 20M} \cite{movielens-20m-dataset}: 20,000,263 ratings by 138,493 users on 27,278 movies, with range 1 to 5.
\item \textbf{MovieLens Hetrec 2011} \cite{grouplens, hetrec-2011}: 855,598 ratings by 2,113 users on 10,109 movies, with range 1 to 5.
\item \textbf{Netflix Prize} \cite{netflix-prize-dataset}: 100,480,507 ratings by 480,189 users on 17,770 movies, with range 1 to 5.
\item \textbf{Amazon Movies TV Series} \cite{amazon-movies-tv-series-dataset}: 4,607,047 ratings by 2,088,620 users on 200,941 movies and TV series, with range 1 to 5.
\end{itemize}
MovieLens 20M and Netflix Prize are preprocessed to extract very dense datasets to be used as source domain.\\
MovieLens Hetrec 2011, Netflix Prize and Amazon Movies TV Series are preprocessed to extract sparse and dense versions, both to be used as target domain.\\
Preprocessing for both source and target domains is performed in multiple iterations. First by removing users with a low amount of interactions. Then by removing items with a low amount of interactions. The missing ratings of the source domain are filled with the average of ratings.\\
Finally, the preprocessed datasets used in the experiments have the following properties:\\
\begin{center}
\begin{tabulary}{1.0\textwidth}{|L|CCCC|}
\hline
\multicolumn{5}{|c|}{Source Domains} \\
\hline
& Density (\%) & Users & Items & Ratings \\
\hline
MovieLens 20M & 81.44 & 500 & 500 & 203610 \\
Netflix Prize & 56.77 & 500 & 500 & 141934 \\
\hline
\hline
\multicolumn{5}{|c|}{Target Domains} \\
\hline
& Density (\%) & Users & Items & Ratings \\
\hline
MovieLens Hetrec 2011 D. & 11.66 & 500 & 1000 & 58298 \\
MovieLens Hetrec 2011 S. & 2.93 & 500 & 1000 & 14627 \\
Netflix Prize D. & 11.53 & 500 & 1000 & 57656 \\
Netflix Prize S. & 3.78 & 500 & 1000 & 18904 \\
Amazon Movies TV Series D. & 10.21 & 500 & 1000 & 51048 \\
Amazon Movies TV Series S. & 2.88 & 500 & 1000 & 14416 \\
\hline
\end{tabulary}
\end{center}
Each target dataset is split in train, validation and test sets. To do so, a random rating for each user is removed from the dataset and added to the validation set. The same is done for the test set, while the remaining ratings form the training set.


\subsection{Hyperparameters}

The following hyperparameters are set:
\begin{itemize}
\item $\texttt{construct\_validation\_every\_n} = 1$: The amount of iterations after which the codebook construction loss is evaluated by the early stopping training.
\item $\texttt{construct\_lower\_validations\_allowed} = 2000$: The amount of consecutive iterations with loss higher than the best one after which the early stopping training for codebook construction stops.
\item $\texttt{maximum\_construct\_iterations} = 20000$: The maximum amount of iterations used for codebook constructions. If the early stopping training reaches this amount, it stops.
\item $\texttt{transfer\_attempts} = 30$: The amount of attempts to find a local minimum for codebook transfer.
\item $\texttt{maximum\_fill\_iterations} = 100$: The maximum amount of iterations used to find a mapping between the target domain and the codebook. The maximum amount is the same for each of the transfer attempts.
\end{itemize}
The following hyperparameters are optimized with bayesian optimization, with 50 iterations and 15 random starts:
\begin{itemize}
\item $\texttt{user\_clusters} = [5,100]$: The amount of user cluster used to build the codebook.
\item $\texttt{item\_clusters} = [5,100]$: The amount of item cluster used to build the codebook.
\item $\texttt{knn\_topk} = [5,1000]$: The amount of similar user to consider when computing similarity for kNN.
\item $\texttt{knn\_shrink} = [0,1000]$: Shrinkage to apply when computing the similarity for kNN.
\item $\texttt{knn\_similarity} = \{pearson,cosine\}$: The similarity type to use for kNN.
\item $\texttt{knn\_normalize} = \{true,false\}$: Whether to normalize when computing the similarity for kNN. Normalization is computed by dividing the dot product by the product of the norms.
\end{itemize}


\begin{figure}[htb]
  \centering
  \includegraphics[width=\textwidth]{pictures/movielens-dense-target}
  \caption
  [Representation of the preprocessed MovieLens Hetrec 2011 Dense training set.]
  {\protect\raggedright Representation of the preprocessed MovieLens Hetrec 2011 Dense training set.}
  \includegraphics[width=\textwidth]{pictures/movielens-sparse-target}
  \caption
  [Representation of the preprocessed MovieLens Hetrec 2011 Sparse training set.]
  {\protect\raggedright Representation of the preprocessed MovieLens Hetrec 2011 Sparse training set.}
\end{figure}


\begin{figure}[htb]
  \centering
  \includegraphics[width=\textwidth]{pictures/movielens-target}
  \caption
  [Heatmap of the preprocessed MovieLens Hetrec 2011 Dense training set.]
  {\protect\raggedright Heatmap of the preprocessed MovieLens Hetrec 2011 Dense training set.}
  \includegraphics[width=\textwidth]{pictures/movielens-target-filled}
  \caption
  [Heatmap of the preprocessed MovieLens Hetrec 2011 Dense training set filled with a codebook extracted from the Netflix Prize domain.]
  {\protect\raggedright Heatmap of the preprocessed MovieLens Hetrec 2011 Dense training set filled with a codebook extracted from the Netflix Prize domain.}
\end{figure}


\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CCCCCC|}
\hline
\multicolumn{7}{|c|}{MovieLens 20M $\rightarrow$ Amazon Movies TV Series (Dense)} \\
\hline
\hline
Fold 1 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0100 & 0.0160 & 0.0019 & 0.0380 & 0.3362 & 0.0700 \\
Random & 0.0042 & 0.0093 & 0.0014 & 0.0280 & \textbf{0.9798} & \textbf{1.0000} \\
kNN Prs. & \textbf{0.0214} & \textbf{0.0351} & \textbf{0.0042} & \textbf{0.0840} & \textbf{0.7096} & \textbf{0.4300} \\
kNN Cos. & \textbf{0.0392} & \textbf{0.0630} & \textbf{0.0075} & \textbf{0.1500} & \textbf{0.9571} & \textbf{0.9440} \\
fCBT Prs. & 0.0107 & 0.0181 & 0.0022 & 0.0440 & 0.3730 & 0.1420 \\
fCBT Cos. & 0.0093 & 0.0162 & 0.0021 & 0.0420 & 0.2598 & 0.0580 \\
CBT Prs. & 0.0110 & 0.0199 & 0.0026 & 0.0520 & 0.3026 & 0.0740 \\
CBT Cos. & 0.0099 & 0.0185 & 0.0025 & 0.0500 & 0.2794 & 0.0590 \\
\hline
\hline
Fold 2 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0158} & \textbf{0.0261} & \textbf{0.0032} & \textbf{0.0640} & 0.3374 & 0.0700 \\
Random & 0.0048 & 0.0110 & 0.0017 & 0.0340 & \textbf{0.9798} & \textbf{1.0000} \\
kNN Prs. & \textbf{0.0292} & \textbf{0.0451} & \textbf{0.0051} & \textbf{0.1020} & 0.6225 & 0.2710 \\
kNN Cos. & \textbf{0.0528} & \textbf{0.0782} & \textbf{0.0086} & \textbf{0.1720} & 0.9256 & 0.7660 \\
fCBT Prs. & 0.0074 & 0.0155 & 0.0023 & 0.0460 & 0.9327 & 0.8540 \\
fCBT Cos. & 0.0067 & 0.0136 & 0.0020 & 0.0400 & 0.6979 & 0.3970 \\
CBT Prs. & 0.0047 & 0.0100 & 0.0015 & 0.0300 & 0.8546 & 0.6850 \\
CBT Cos. & 0.0059 & 0.0117 & 0.0017 & 0.0340 & 0.8133 & 0.8170 \\
\hline
\hline
Fold 3 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0132} & \textbf{0.0237} & \textbf{0.0032} & \textbf{0.0640} & 0.3371 & 0.0700 \\
Random & 0.0051 & 0.0090 & 0.0012 & 0.0240 & \textbf{0.9798} & \textbf{1.0000} \\
kNN Prs. & \textbf{0.0220} & \textbf{0.0362} & \textbf{0.0044} & \textbf{0.0880} & \textbf{0.8633} & \textbf{0.6630} \\
kNN Cos. & \textbf{0.0506} & \textbf{0.0727} & \textbf{0.0078} & \textbf{0.1560} & \textbf{0.9691} & \textbf{0.9820} \\
fCBT Prs. & 0.0102 & 0.0156 & 0.0018 & 0.0360 & 0.7620 & 0.5950 \\
fCBT Cos. & 0.0073 & 0.0142 & 0.0020 & 0.0400 & 0.7485 & 0.4200 \\
CBT Prs. & 0.0060 & 0.0130 & 0.0019 & 0.0380 & 0.5951 & 0.5450 \\
CBT Cos. & 0.0071 & 0.0150 & 0.0022 & 0.0440 & 0.2082 & 0.0550 \\
\hline
\end{tabulary}
\caption{Results of CBT experiment on preprocessed target dataset for cutoff 20 on Amazon Movies TV Series (Dense), with MovieLens 20M as source domain. Higher values are better. Best results are in bold.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CC|}
\hline
\multicolumn{3}{|c|}{MovieLens 20M $\rightarrow$ Amazon Movies TV Series (Dense)} \\
\hline
\hline
& mAP@20 & Difference is Significant \\
\hline
CBT Cos. & 0.0077 $\pm$ 0.0017 & \\
\hline
Random & 0.0047 $\pm$ 0.0004 & False \\
TopPop & 0.0130 $\pm$ 0.0024 & False \\
kNN Prs. & 0.0242 $\pm$ 0.0036 & True \\
kNN Cos. & 0.0476 $\pm$ 0.0060 & True \\
fCBT Prs. & 0.0094 $\pm$ 0.0015 & False \\
fCBT Cos. & 0.0078 $\pm$ 0.0011 & False \\
\hline
\hline
& mAP@20 & Difference is Significant \\
\hline
CBT Prs. & 0.0073 $\pm$ 0.0027 & \\
\hline
Random & 0.0047 $\pm$ 0.0004 & False \\
TopPop & 0.0130 $\pm$ 0.0024 & False \\
kNN Prs. & 0.0242 $\pm$ 0.0036 & False \\
kNN Cos. & 0.0476 $\pm$ 0.0060 & True \\
fCBT Prs. & 0.0094 $\pm$ 0.0015 & False \\
fCBT Cos. & 0.0078 $\pm$ 0.0011 & False \\
\hline
\end{tabulary}
\caption{Significance tests of CBT experiment on preprocessed target dataset for mAP@20 differences between CBT and baselines on Amazon Movies TV Series (Dense), with MovieLens 20M as source domain.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CCCCCC|}
\hline
\multicolumn{7}{|c|}{MovieLens 20M $\rightarrow$ Amazon Movies TV Series (Sparse)} \\
\hline
\hline
Fold 1 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0900} & \textbf{0.1104} & \textbf{0.0094} & \textbf{0.1880} & 0.1840 & 0.0570 \\
Random & 0.0030 & 0.0062 & 0.0009 & 0.0180 & \textbf{0.9799} & \textbf{1.0000} \\
kNN Prs. & \textbf{0.0922} & \textbf{0.1085} & \textbf{0.0083} & \textbf{0.1660} & 0.7109 & \textbf{0.6260} \\
kNN Cos. & \textbf{0.1045} & \textbf{0.1272} & \textbf{0.0105} & \textbf{0.2100} & 0.5186 & 0.2850 \\
fCBT Prs. & 0.0091 & 0.0153 & 0.0019 & 0.0380 & 0.7979 & 0.4080 \\
fCBT Cos. & 0.0138 & 0.0213 & 0.0024 & 0.0480 & 0.1304 & 0.0510 \\
CBT Prs. & 0.0663 & 0.0802 & 0.0066 & 0.1320 & 0.2823 & 0.0860 \\
CBT Cos. & 0.0747 & 0.0889 & 0.0071 & 0.1420 & 0.1639 & 0.0600 \\
\hline
\hline
Fold 2 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0662} & \textbf{0.0871} & \textbf{0.0082} & \textbf{0.1640} & 0.1840 & 0.0580 \\
Random & 0.0042 & 0.0078 & 0.0011 & 0.0220 & \textbf{0.9799} & \textbf{1.0000} \\
kNN Prs. & \textbf{0.0565} & \textbf{0.0743} & \textbf{0.0069} & \textbf{0.1380} & \textbf{0.7199} & \textbf{0.4710} \\
kNN Cos. & \textbf{0.0765} & \textbf{0.0983} & \textbf{0.0088} & \textbf{0.1760} & 0.4411 & 0.2030 \\
fCBT Prs. & 0.0220 & 0.0333 & 0.0038 & 0.0760 & 0.5939 & 0.3510 \\
fCBT Cos. & 0.0080 & 0.0154 & 0.0021 & 0.0420 & 0.6468 & 0.3200 \\
CBT Prs. & 0.0539 & 0.0672 & 0.0058 & 0.1160 & 0.2899 & 0.0840 \\
CBT Cos. & 0.0530 & 0.0648 & 0.0054 & 0.1080 & 0.1646 & 0.0580 \\
\hline
\hline
Fold 3 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0824} & \textbf{0.0989} & \textbf{0.0080} & \textbf{0.1600} & 0.1842 & 0.0580 \\
Random & 0.0027 & 0.0059 & 0.0009 & 0.0180 & \textbf{0.9799} & \textbf{1.0000} \\
kNN Prs. & \textbf{0.0756} & \textbf{0.0912} & \textbf{0.0073} & \textbf{0.1460} & \textbf{0.7250} & \textbf{0.5970} \\
kNN Cos. & \textbf{0.0922} & \textbf{0.1106} &  \textbf{0.0087} &  \textbf{0.1740} & 0.4464 & 0.2000 \\
fCBT Prs. & 0.0085 & 0.0136 & 0.0016 & 0.0320 & 0.6222 & 0.3170 \\
fCBT Cos. & 0.0129 & 0.0196 & 0.0022 & 0.0440 & 0.1283 & 0.0460 \\
CBT Prs. & 0.0670 & 0.0788 & 0.0061 & 0.1220 & 0.2113 & 0.0700 \\
CBT Cos. & 0.0647 & 0.0734 & 0.0052 & 0.1040 & 0.1611 & 0.0590 \\
\hline
\end{tabulary}
\caption{Results of CBT experiment on preprocessed target dataset for cutoff 20 on Amazon Movies TV Series (Sparse), with MovieLens 20M as source domain. Higher values are better. Best results are in bold.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CC|}
\hline
\multicolumn{3}{|c|}{MovieLens 20M $\rightarrow$ Amazon Movies TV Series (Sparse)} \\
\hline
\hline
& mAP@20 & Difference is Significant \\
\hline
CBT Cos. & 0.0641 $\pm$ 0.0088 & \\
\hline
Random & 0.0033 $\pm$ 0.0007 & True \\
TopPop & 0.0795 $\pm$ 0.0099 & True \\
kNN Prs. & 0.0748 $\pm$ 0.0146 & False \\
kNN Cos. & 0.0911 $\pm$ 0.0115 & True \\
fCBT Prs. & 0.0132 $\pm$ 0.0062 & True \\
fCBT Cos. & 0.0116 $\pm$ 0.0026 & True \\
\hline
\hline
& mAP@20 & Difference is Significant \\
\hline
CBT Prs. & 0.0624 $\pm$ 0.0060 & \\
\hline
Random & 0.0033 $\pm$ 0.0007 & True \\
TopPop & 0.0795 $\pm$ 0.0099 & True \\
kNN Prs. & 0.0748 $\pm$ 0.0146 & False \\
kNN Cos. & 0.0911 $\pm$ 0.0115 & True \\
fCBT Prs. & 0.0132 $\pm$ 0.0062 & True \\
fCBT Cos. & 0.0116 $\pm$ 0.0026 & True \\
\hline
\end{tabulary}
\caption{Significance tests of CBT experiment on preprocessed target dataset for mAP@20 differences between CBT and baselines on Amazon Movies TV Series (Sparse), with MovieLens 20M as source domain.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CCCCCC|}
\hline
\multicolumn{7}{|c|}{MovieLens 20M $\rightarrow$ Netflix Prize (Dense)} \\
\hline
\hline
Fold 1 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.1124} & \textbf{0.1604} & \textbf{0.0170} & \textbf{0.3320} & 0.6775 & 0.2280 \\
Random & 0.0079 & 0.0156 & 0.0026 & 0.0440 & \textbf{0.9796} & \textbf{0.9990} \\
kNN Prs. & \textbf{0.1089} & \textbf{0.1648} & \textbf{0.0187} & \textbf{0.3660} & 0.7330 & 0.3370 \\
kNN Cos. & \textbf{0.1617} & \textbf{0.2210} & \textbf{0.0218} & \textbf{0.4280} & \textbf{0.8409} & 0.4360 \\
fCBT Prs. & 0.0609 & 0.0951 & 0.0112 & 0.2160 & 0.8323 & 0.5100 \\
fCBT Cos. & 0.0636 & 0.0996 & 0.0118 & 0.2280 & 0.5220 & 0.2430 \\
CBT Prs. & 0.0629 & 0.1004 & 0.0121 & 0.2340 & 0.5161 & 0.1540 \\
CBT Cos. & 0.0578 & 0.0889 & 0.0103 & 0.1980 & 0.5961 & 0.5600 \\
\hline
\hline
Fold 2 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.1057} & \textbf{0.1537} & \textbf{0.0167} & \textbf{0.3260} & \textbf{0.6777} & 0.2260 \\
Random & 0.0065 & 0.0098 & 0.0015 & 0.0220 & \textbf{0.9796} & \textbf{0.9990} \\
kNN Prs. & \textbf{0.1257} & \textbf{0.1767} & \textbf{0.0183} & \textbf{0.3580} & \textbf{0.7108} & 0.2680 \\
kNN Cos. & \textbf{0.1434} & \textbf{0.2012} & \textbf{0.0208} & \textbf{0.4080} & \textbf{0.8117} & \textbf{0.3500} \\
fCBT Prs. & 0.0648 & 0.0986 & 0.0112 & 0.2160 & 0.6538 & 0.2390 \\
fCBT Cos. & 0.0521 & 0.0859 & 0.0106 & 0.2040 & 0.5274 & 0.1420 \\
CBT Prs. & 0.0589 & 0.0921 & 0.0109 & 0.2100 & 0.6302 & 0.3060 \\
CBT Cos. & 0.0489 & 0.0802 & 0.0099 & 0.1900 & 0.4959 & 0.1400 \\
\hline
\hline
Fold 3 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.1055} & \textbf{0.1555} & \textbf{0.0171} & \textbf{0.3340} & 0.6778 & 0.2250 \\
Random & 0.0044 & 0.0092 & 0.0017 & 0.0260 & \textbf{0.9796} & \textbf{0.9990} \\
kNN Prs. & \textbf{0.1197} & \textbf{0.1746} & \textbf{0.0189} & \textbf{0.3700} & 0.7368 & 0.3310 \\
kNN Cos. & \textbf{0.1670} & \textbf{0.2258} & \textbf{0.0220} & \textbf{0.4320} & \textbf{0.8223} & 0.3790 \\
fCBT Prs. & 0.0539 & 0.0854 & 0.0102 & 0.1960 & 0.5836 & 0.2560 \\
fCBT Cos. & 0.0606 & 0.0963 & 0.0115 & 0.2220 & 0.5054 & 0.1350 \\
CBT Prs. & 0.0604 & 0.0898 & 0.0100 & 0.1920 & 0.7932 & 0.4460 \\
CBT Cos. & 0.0570 & 0.0914 & 0.0110 & 0.2120 & 0.4967 & 0.1390 \\
\hline
\end{tabulary}
\caption{Results of CBT experiment on preprocessed target dataset for cutoff 20 on Netflix Prize (Dense), with MovieLens 20M as source domain. Higher values are better. Best results are in bold.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CC|}
\hline
\multicolumn{3}{|c|}{MovieLens 20M $\rightarrow$ Netflix Prize (Dense)} \\
\hline
\hline
& mAP@20 & Difference is Significant \\
\hline
CBT Cos. & 0.0546 $\pm$ 0.0040 & \\
\hline
Random & 0.0063 $\pm$ 0.0014 & True \\
TopPop & 0.1079 $\pm$ 0.0032 & True \\
kNN Prs. & 0.1181 $\pm$ 0.0070 & True \\
kNN Cos. & 0.1573 $\pm$ 0.0101 & True \\
fCBT Prs. & 0.0599 $\pm$ 0.0045 & False \\
fCBT Cos. & 0.0588 $\pm$ 0.0048 & True \\
\hline
\hline
& mAP@20 & Difference is Significant \\
\hline
CBT Prs. & 0.0607 $\pm$ 0.0016 & \\
\hline
Random & 0.0063 $\pm$ 0.0014 & True \\
TopPop & 0.1079 $\pm$ 0.0032 & True \\
kNN Prs. & 0.1181 $\pm$ 0.0070 & True \\
kNN Cos. & 0.1573 $\pm$ 0.0101 & True \\
fCBT Prs. & 0.0599 $\pm$ 0.0045 & False \\
fCBT Cos. & 0.0588 $\pm$ 0.0048 & False \\
\hline
\end{tabulary}
\caption{Significance tests of CBT experiment on preprocessed target dataset for mAP@20 differences between CBT and baselines on Netflix Prize (Dense), with MovieLens 20M as source domain.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CCCCCC|}
\hline
\multicolumn{7}{|c|}{MovieLens 20M $\rightarrow$ Netflix Prize (Sparse)} \\
\hline
\hline
Fold 1 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.1512} & \textbf{0.2184} & \textbf{0.0229} & \textbf{0.4580} & \textbf{0.5231} & 0.1060 \\
Random & 0.0014 & 0.0036 & 0.0006 & 0.0120 & \textbf{0.9798} & \textbf{1.0000} \\
kNN Prs. & \textbf{0.1597} & \textbf{0.2290} & \textbf{0.0238} & \textbf{0.4760} & \textbf{0.5794} & \textbf{0.1430} \\
kNN Cos. & \textbf{0.1905} & \textbf{0.2639} & \textbf{0.0263} & \textbf{0.5260} & \textbf{0.6681} & \textbf{0.1920} \\
fCBT Prs. & 0.1305 & 0.1849 & 0.0188 & 0.3760 & 0.4888 & 0.1360 \\
fCBT Cos. & 0.1314 & 0.1867 & 0.0190 & 0.3800 & 0.4466 & 0.0780 \\
CBT Prs. & 0.0843 & 0.1020 & 0.0081 & 0.1620 & 0.2108 & 0.0380 \\
CBT Cos. & 0.1101 & 0.1433 & 0.0128 & 0.2560 & 0.3036 & 0.0440 \\
\hline
\hline
Fold 2 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.1652} & \textbf{0.2344} & \textbf{0.0241} & \textbf{0.4820} & \textbf{0.5234} & 0.1050 \\
Random & 0.0016 & 0.0038 & 0.0006 & 0.0120 & \textbf{0.9797} & \textbf{1.0000} \\
kNN Prs. & \textbf{0.1744} & \textbf{0.2453} & \textbf{0.0248} & \textbf{0.4960} & \textbf{0.5724} & 0.1390 \\
kNN Cos. & \textbf{0.1972} & \textbf{0.2706} & \textbf{0.0266} & \textbf{0.5320} & \textbf{0.5931} & 0.1220 \\
fCBT Prs. & 0.1394 & 0.1939 & 0.0193 & 0.3860 & 0.4762 & 0.1420 \\
fCBT Cos. & 0.1421 & 0.1971 & 0.0195 & 0.3900 & 0.4473 & 0.0780 \\
CBT Prs. & 0.0944 & 0.1200 & 0.0102 & 0.2040 & 0.2630 & 0.0400 \\
CBT Cos. & 0.1081 & 0.1416 & 0.0128 & 0.2560 & 0.3020 & 0.0470 \\
\hline
\hline
Fold 3 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.1401} & \textbf{0.2064} & \textbf{0.0223} & \textbf{0.4460} & \textbf{0.5231} & 0.1100 \\
Random & 0.0047 & 0.0061 & 0.0006 & 0.0120 & \textbf{0.9798} & \textbf{1.0000} \\
kNN Prs. & \textbf{0.1469} & \textbf{0.2100} & \textbf{0.0218} & \textbf{0.4360} & \textbf{0.6111} & 0.1550 \\
kNN Cos. & \textbf{0.1665} & \textbf{0.2312} & \textbf{0.0230} & \textbf{0.4600} & \textbf{0.5961} & 0.1220 \\
fCBT Prs. & 0.1081 & 0.1572 & 0.0164 & 0.3280 & 0.4789 & 0.1540 \\
fCBT Cos. & 0.1057 & 0.1538 & 0.0161 & 0.3220 & 0.4980 & 0.2490 \\
CBT Prs. & 0.0822 & 0.1119 & 0.0107 & 0.2140 & 0.3496 & 0.0610 \\
CBT Cos. & 0.0837 & 0.1127 & 0.0106 & 0.2120 & 0.2989 & 0.0410 \\
\hline
\end{tabulary}
\caption{Results of CBT experiment on preprocessed target dataset for cutoff 20 on Netflix Prize (Sparse), with MovieLens 20M as source domain. Higher values are better. Best results are in bold.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CC|}
\hline
\multicolumn{3}{|c|}{MovieLens 20M $\rightarrow$ Netflix Prize (Sparse)} \\
\hline
\hline
& mAP@20 & Difference is Significant \\
\hline
CBT Cos. & 0.1006 $\pm$ 0.0120 & \\
\hline
Random & 0.0026 $\pm$ 0.0015 & True \\
TopPop & 0.1522 $\pm$ 0.0103 & True \\
kNN Prs. & 0.1604 $\pm$ 0.0112 & True \\
kNN Cos. & 0.1847 $\pm$ 0.0132 & True \\
fCBT Prs. & 0.1260 $\pm$ 0.0132 & True \\
fCBT Cos. & 0.1264 $\pm$ 0.0153 & True \\
\hline
\hline
& mAP@20 & Difference is Significant \\
\hline
CBT Prs. & 0.0870 $\pm$ 0.0053 & \\
\hline
Random & 0.0026 $\pm$ 0.0015 & True \\
TopPop & 0.1522 $\pm$ 0.0103 & True \\
kNN Prs. & 0.1604 $\pm$ 0.0112 & True \\
kNN Cos. & 0.1847 $\pm$ 0.0132 & True \\
fCBT Prs. & 0.1260 $\pm$ 0.0132 & True \\
fCBT Cos. & 0.1264 $\pm$ 0.0153 & True \\
\hline
\end{tabulary}
\caption{Significance tests of CBT experiment on preprocessed target dataset for mAP@20 differences between CBT and baselines on Netflix Prize (Sparse), with MovieLens 20M as source domain.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CCCCCC|}
\hline
\multicolumn{7}{|c|}{Netflix Prize $\rightarrow$ Amazon Movies TV Series (Dense)} \\
\hline
\hline
Fold 1 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0119 &           0.0203 &           0.0026 &           0.0520 &                                           0.3381 &                                            0.0710 \\
Random & 0.0037 &           0.0074 &           0.0011 &           0.0220 &                                  \textbf{0.9798} &                                   \textbf{1.0000} \\
kNN Prs. & \textbf{0.0221} &  \textbf{0.0368} &  \textbf{0.0045} &  \textbf{0.0900} &                                           0.7904 &                                            0.5150 \\
kNN Cos. & \textbf{0.0379} &  \textbf{0.0617} &  \textbf{0.0074} &  \textbf{0.1480} &                                           0.8939 &                                            0.6190 \\
fCBT Prs. & 0.0047 &           0.0098 &           0.0014 &           0.0280 &                                           0.8367 &                                            0.8500 \\
fCBT Cos. & 0.0093 &           0.0148 &           0.0018 &           0.0360 &                                           0.2683 &                                            0.0600 \\
CBT Prs. & 0.0138 &           0.0246 &           0.0032 &           0.0640 &                                           0.9073 &                                            0.8580 \\
CBT Cos. & 0.0089 &           0.0147 &           0.0018 &           0.0360 &                                           0.2809 &                                            0.0580 \\
\hline
\hline
Fold 2 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0102 &           0.0220 &           0.0033 &           0.0660 &                                           0.3370 &                                            0.0710 \\
Random & 0.0072 &           0.0148 &           0.0021 &           0.0420 &                                  \textbf{0.9798} &                                   \textbf{1.0000} \\
kNN Prs. & \textbf{0.0245} &  \textbf{0.0423} &  \textbf{0.0054} &  \textbf{0.1080} &                                           0.7202 &                                            0.4830 \\
kNN Cos. & \textbf{0.0556} &  \textbf{0.0797} &  \textbf{0.0083} &  \textbf{0.1660} &                                  \textbf{0.9586} &                                   \textbf{0.9400} \\
fCBT Prs. & 0.0113 &           0.0190 &           0.0024 &           0.0480 &                                           0.9477 &                                            0.8650 \\
fCBT Cos. & 0.0101 &           0.0170 &           0.0021 &           0.0420 &                                           0.2419 &                                            0.0570 \\
CBT Prs. & 0.0191 &           0.0321 &           0.0040 &           0.0800 &                                           0.8151 &                                            0.6830 \\
CBT Cos. & 0.0109 &           0.0169 &           0.0019 &           0.0380 &                                           0.6780 &                                            0.5530 \\
\hline
\hline
Fold 3 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0204} &  \textbf{0.0304} &  \textbf{0.0033} &  \textbf{0.0660} &                                           0.3348 &                                            0.0700 \\
Random & 0.0030 &           0.0078 &           0.0013 &           0.0260 &                                  \textbf{0.9798} &                                   \textbf{1.0000} \\
kNN Prs. & \textbf{0.0265} &  \textbf{0.0417} &  \textbf{0.0049} &  \textbf{0.0980} &                                  \textbf{0.6336} &                                            0.2840 \\
kNN Cos. & \textbf{0.0331} &  \textbf{0.0581} &  \textbf{0.0075} &  \textbf{0.1500} &                                  \textbf{0.8778} &                                   \textbf{0.5780} \\
fCBT Prs. & 0.0107 &           0.0179 &           0.0022 &           0.0440 &                                           0.3047 &                                            0.1040 \\
fCBT Cos. & 0.0095 &           0.0172 &           0.0023 &           0.0460 &                                           0.5255 &                                            0.5700  \\
CBT Prs. & 0.0114 &           0.0216 &           0.0030 &           0.0600 &                                           0.2997 &                                            0.1140 \\
CBT Cos. & 0.0098 &           0.0174 &           0.0023 &           0.0460 &                                           0.2548 &                                            0.0590 \\
\hline
\end{tabulary}
\caption{Results of CBT experiment on preprocessed target dataset for cutoff 20 on Amazon Movies TV Series (Dense), with Netflix Prize as source domain. Higher values are better. Best results are in bold.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CC|}
\hline
\multicolumn{3}{|c|}{Netflix Prize $\rightarrow$ Amazon Movies TV Series (Dense)} \\
\hline
\hline
& mAP@20 & Difference is Significant \\
\hline
CBT Cos. & 0.0099 $\pm$ 0.0008 & \\
\hline
Random & 0.0046 $\pm$ 0.0018 & True \\
TopPop & 0.0142 $\pm$ 0.0044 & False \\
kNN Prs. & 0.0244 $\pm$ 0.0018 & True \\
kNN Cos. & 0.0422 $\pm$ 0.0096 & True \\
fCBT Prs. & 0.0089 $\pm$ 0.0030 & False \\
fCBT Cos. & 0.0096 $\pm$ 0.0004 & False \\
\hline
\hline
& mAP@20 & Difference is Significant \\
\hline
CBT Prs. & 0.0148 $\pm$ 0.0032 & \\
\hline
Random & 0.0046 $\pm$ 0.0018 & True \\
TopPop & 0.0142 $\pm$ 0.0044 & False \\
kNN Prs. & 0.0244 $\pm$ 0.0018 & False \\
kNN Cos. & 0.0422 $\pm$ 0.0096 & True \\
fCBT Prs. & 0.0089 $\pm$ 0.0030 & False \\
fCBT Cos. & 0.0096 $\pm$ 0.0004 & False \\
\hline
\end{tabulary}
\caption{Significance tests of CBT experiment on preprocessed target dataset for mAP@20 differences between CBT and baselines on Amazon Movies TV Series (Dense), with Netflix Prize as source domain.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CCCCCC|}
\hline
\multicolumn{7}{|c|}{Netflix Prize $\rightarrow$ Amazon Movies TV Series (Sparse)} \\
\hline
\hline
Fold 1 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0823} &  \textbf{0.1000} &  \textbf{0.0083} &  \textbf{0.1660} &                                           0.1884 &                                            0.0570 \\
Random & 0.0031 &           0.0075 &           0.0012 &           0.0240 &                                  \textbf{0.9799} &                                   \textbf{1.0000} \\
kNN Prs. & \textbf{0.0841} &  \textbf{0.1019} &  \textbf{0.0083} &  \textbf{0.1660} &                                           0.7379 &                                   \textbf{0.6260} \\
kNN Cos. & \textbf{0.0911} &  \textbf{0.1092} &  \textbf{0.0087} &  \textbf{0.1740} &                                           0.4460 &                                            0.1670 \\
fCBT Prs. & 0.0206 &           0.0305 &           0.0033 &           0.0660 &                                           0.7454 &                                            0.2280 \\
fCBT Cos. & 0.0090 &           0.0177 &           0.0025 &           0.0500 &                                           0.6709 &                                            0.3480 \\
CBT Prs. & 0.0783 &           0.0906 &           0.0068 &           0.1360 &                                           0.2160 &                                            0.0700 \\
CBT Cos. & 0.0773 &           0.0886 &           0.0065 &           0.1300 &                                           0.1625 &                                            0.0610 \\
\hline
\hline
Fold 2 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.1108} &  \textbf{0.1288} &  \textbf{0.0098} &  \textbf{0.1960} &                                           0.1914 &                                            0.0580 \\
Random & 0.0067 &           0.0122 &           0.0016 &           0.0320 &                                  \textbf{0.9799} &                                   \textbf{1.0000} \\
kNN Prs. & \textbf{0.0829} &  \textbf{0.0999} &  \textbf{0.0081} &  \textbf{0.1620} &                                  \textbf{0.7253} &                                            0.4790 \\
kNN Cos. & \textbf{0.1129} &  \textbf{0.1320} &  \textbf{0.0100} &  \textbf{0.2000} &                                           0.4543 &                                            0.1740 \\
fCBT Prs. & 0.0125 &           0.0236 &           0.0032 &           0.0640 &                                           0.6953 &                                            0.5620 \\
fCBT Cos. & 0.0181 &           0.0247 &           0.0024 &           0.0480 &                                           0.1128 &                                            0.0450 \\
CBT Prs. & 0.0293 &           0.0553 &           0.0073 &           0.1460 &                                           0.2258 &                                            0.0800 \\
CBT Cos. & 0.0249 &           0.0531 &           0.0079 &           0.1580 &                                           0.1620 &                                            0.0620 \\
\hline
\hline
Fold 3 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0836} &  \textbf{0.1042} &  \textbf{0.0090} &  \textbf{0.1800} &                                           0.1826 &                                            0.0580 \\
Random & 0.0043 &           0.0079 &           0.0010 &           0.0200 &                                  \textbf{0.9799} &                                   \textbf{1.0000} \\
kNN Prs. & \textbf{0.0857} &  \textbf{0.1099} &  \textbf{0.0097} &  \textbf{0.1940} &                                           0.7174 &                                   \textbf{0.5960} \\
kNN Cos. & \textbf{0.1002} &  \textbf{0.1247} &  \textbf{0.0105} &  \textbf{0.2100} &                                           0.5888 &                                            0.3620 \\
fCBT Prs. & 0.0105 &           0.0192 &           0.0026 &           0.0520 &                                           0.7420 &                                            0.2940 \\
fCBT Cos. & 0.0157 &           0.0233 &           0.0025 &           0.0500 &                                           0.1095 &                                            0.0530 \\
CBT Prs. & 0.0286 &           0.0418 &           0.0044 &           0.0880 &                                           0.7644 &                                            0.5110 \\
CBT Cos. & 0.0702 &           0.0843 &           0.0068 &           0.1360 &                                           0.1627 &                                            0.0580 \\
\hline
\end{tabulary}
\caption{Results of CBT experiment on preprocessed target dataset for cutoff 20 on Amazon Movies TV Series (Sparse), with Netflix Prize as source domain. Higher values are better. Best results are in bold.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CC|}
\hline
\multicolumn{3}{|c|}{Netflix Prize $\rightarrow$ Amazon Movies TV Series (Sparse)} \\
\hline
\hline
& mAP@20 & Difference is Significant \\
\hline
CBT Cos. & 0.0574 $\pm$ 0.0232 & \\
\hline
Random & 0.0047 $\pm$ 0.0015 & False \\
TopPop & 0.0922 $\pm$ 0.0131 & False \\
kNN Prs. & 0.0843 $\pm$ 0.0012 & False \\
kNN Cos. & 0.1014 $\pm$ 0.0090 & False \\
fCBT Prs. & 0.0145 $\pm$ 0.0044 & False \\
fCBT Cos. & 0.0143 $\pm$ 0.0038 & False \\
\hline
\hline
& mAP@20 & Difference is Significant \\
\hline
CBT Prs. & 0.0454 $\pm$ 0.0232 & \\
\hline
Random & 0.0047 $\pm$ 0.0015 & False \\
TopPop & 0.0922 $\pm$ 0.0131 & False \\
kNN Prs. & 0.0843 $\pm$ 0.0012 & False \\
kNN Cos. & 0.1014 $\pm$ 0.0090 & False \\
fCBT Prs. & 0.0145 $\pm$ 0.0044 & False \\
fCBT Cos. & 0.0143 $\pm$ 0.0038 & False \\
\hline
\end{tabulary}
\caption{Significance tests of CBT experiment on preprocessed target dataset for mAP@20 differences between CBT and baselines on Amazon Movies TV Series (Sparse), with Netflix Prize as source domain.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CCCCCC|}
\hline
\multicolumn{7}{|c|}{Netflix Prize $\rightarrow$ MovieLens Hetrec 2011 (Dense)} \\
\hline
\hline
Fold 1 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0284} &  \textbf{0.0469} &  \textbf{0.0058} &  \textbf{0.1160} &                                           0.5164 &                                            0.1380 \\
Random & 0.0061 &           0.0111 &           0.0015 &           0.0300 &                                  \textbf{0.9797} &                                   \textbf{1.0000} \\
kNN Prs. & \textbf{0.0333} &  \textbf{0.0540} &  \textbf{0.0066} &  \textbf{0.1320} &                                           0.6052 &                                            0.1780 \\
kNN Cos. & \textbf{0.0509} &  \textbf{0.0867} &  \textbf{0.0110} &  \textbf{0.2200} &                                  \textbf{0.8605} &                                   \textbf{0.5520} \\
fCBT Prs. & 0.0154 &           0.0286 &           0.0039 &           0.0780 &                                           0.7685 &                                            0.5150 \\
fCBT Cos. & 0.0235 &           0.0378 &           0.0045 &           0.0900 &                                           0.3630 &                                            0.0810 \\
CBT Prs. & 0.0228 &           0.0400 &           0.0052 &           0.1040 &                                           0.3651 &                                            0.0800 \\
CBT Cos. & 0.0232 &           0.0371 &           0.0044 &           0.0880 &                                           0.3614 &                                            0.0810 \\
\hline
\hline
Fold 2 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0354} &  \textbf{0.0564} &  \textbf{0.0067} &  \textbf{0.1340} &                                           0.5159 &                                            0.1400 \\
Random & 0.0035 &           0.0061 &           0.0008 &           0.0160 &                                  \textbf{0.9797} &                                   \textbf{1.0000} \\
kNN Prs. & \textbf{0.0388} &  \textbf{0.0611} &  \textbf{0.0072} &  \textbf{0.1440} &                                  \textbf{0.7246} &                                            0.3170 \\
kNN Cos. & \textbf{0.0658} &  \textbf{0.0970} &  \textbf{0.0105} &  \textbf{0.2100} &                                  \textbf{0.8613} &                                   \textbf{0.5010} \\
fCBT Prs. & 0.0242 &           0.0360 &           0.0041 &           0.0820 &                                           0.3855 &                                            0.0900 \\
fCBT Cos. & 0.0245 &           0.0355 &           0.0039 &           0.0780 &                                           0.3636 &                                            0.0820 \\
CBT Prs. & 0.0255 &           0.0361 &           0.0038 &           0.0760 &                                           0.5481 &                                            0.3820 \\
CBT Cos. & 0.0231 &           0.0336 &           0.0037 &           0.0740 &                                           0.3591 &                                            0.0790 \\
\hline
\hline
Fold 3 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0325} &  \textbf{0.0550} &  \textbf{0.0069} &  \textbf{0.1380} &                                  \textbf{0.5161} &                                   \textbf{0.1370} \\
Random & 0.0049 &           0.0107 &           0.0016 &           0.0320 &                                  \textbf{0.9797} &                                   \textbf{1.0000} \\
kNN Prs. & \textbf{0.0410} &  \textbf{0.0678} &  \textbf{0.0084} &  \textbf{0.1680} &                                  \textbf{0.6467} &                                   \textbf{0.2380} \\
kNN Cos. & \textbf{0.0561} &  \textbf{0.0904} &  \textbf{0.0107} &  \textbf{0.2140} &                                  \textbf{0.7975} &                                   \textbf{0.3740} \\
fCBT Prs. & 0.0295 &           0.0472 &           0.0056 &           0.1120 &                                           0.4404 &                                            0.1280 \\
fCBT Cos. & 0.0262 &           0.0429 &           0.0052 &           0.1040 &                                           0.3664 &                                            0.0810 \\
CBT Prs. & 0.0259 &           0.0419 &           0.0050 &           0.1000 &                                           0.3675 &                                            0.0810 \\
CBT Cos. & 0.0263 &           0.0437 &           0.0054 &           0.1080 &                                           0.3666 &                                            0.0790 \\
\hline
\end{tabulary}
\caption{Results of CBT experiment on preprocessed target dataset for cutoff 20 on MovieLens Hetrec 2011 (Dense), with Netflix Prize as source domain. Higher values are better. Best results are in bold.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CC|}
\hline
\multicolumn{3}{|c|}{Netflix Prize $\rightarrow$ MovieLens Hetrec 2011 (Dense)} \\
\hline
\hline
& mAP@20 & Difference is Significant \\
\hline
CBT Cos. & 0.0242 $\pm$ 0.0015 & \\
\hline
Random & 0.0048 $\pm$ 0.0011 & False \\
TopPop & 0.0321 $\pm$ 0.0029 & False \\
kNN Prs. & 0.0377 $\pm$ 0.0032 & False \\
kNN Cos. & 0.0576 $\pm$ 0.0062 & False \\
fCBT Prs. & 0.0230 $\pm$ 0.0058 & False \\
fCBT Cos. & 0.0247 $\pm$ 0.0011 & False \\
\hline
\hline
& mAP@20 & Difference is Significant \\
\hline
CBT Prs. & 0.0247 $\pm$ 0.0014 & \\
\hline
Random & 0.0048 $\pm$ 0.0011 & True \\
TopPop & 0.0321 $\pm$ 0.0029 & True \\
kNN Prs. & 0.0377 $\pm$ 0.0032 & True \\
kNN Cos. & 0.0576 $\pm$ 0.0062 & True \\
fCBT Prs. & 0.0230 $\pm$ 0.0058 & False \\
fCBT Cos. & 0.0247 $\pm$ 0.0011 & False \\
\hline
\end{tabulary}
\caption{Significance tests of CBT experiment on preprocessed target dataset for mAP@20 differences between CBT and baselines on MovieLens Hetrec 2011 (Dense), with Netflix Prize as source domain.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CCCCCC|}
\hline
\multicolumn{7}{|c|}{Netflix Prize $\rightarrow$ MovieLens Hetrec 2011 (Sparse)} \\
\hline
\hline
Fold 1 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0182} &  \textbf{0.0294} &  \textbf{0.0035} &  \textbf{0.0700} &                                           0.1564 &                                            0.0440 \\
Random & 0.0041 &           0.0070 &           0.0009 &           0.0180 &                                  \textbf{0.9800} &                                   \textbf{1.0000} \\
kNN Prs. & \textbf{0.0242} &  \textbf{0.0390} &  \textbf{0.0046} &  \textbf{0.0920} &                                  \textbf{0.8937} &                                   \textbf{0.8250} \\
kNN Cos. & \textbf{0.0491} &  \textbf{0.0772} &  \textbf{0.0090} &  \textbf{0.1800} &                                  \textbf{0.8601} &                                   \textbf{0.6610} \\
fCBT Prs. & 0.0165 &           0.0261 &           0.0031 &           0.0620 &                                           0.5772 &                                            0.5430 \\
fCBT Cos. & 0.0128 &           0.0245 &           0.0034 &           0.0680 &                                           0.1130 &                                            0.0340 \\
CBT Prs. & 0.0075 &           0.0157 &           0.0023 &           0.0460 &                                           0.3317 &                                            0.1580 \\
CBT Cos. & 0.0113 &           0.0222 &           0.0031 &           0.0620 &                                           0.1095 &                                            0.0370 \\
\hline
\hline
Fold 2 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0177} &  \textbf{0.0297} &  \textbf{0.0037} &  \textbf{0.0740} &                                           0.1662 &                                            0.0440 \\
Random & 0.0051 &           0.0101 &           0.0014 &           0.0280 &                                  \textbf{0.9800} &                                   \textbf{1.0000} \\
kNN Prs. & \textbf{0.0189} &  \textbf{0.0331} &  \textbf{0.0043} &  \textbf{0.0860} &                                  \textbf{0.8944} &                                   \textbf{0.8120} \\
kNN Cos. & \textbf{0.0451} &  \textbf{0.0697} &  \textbf{0.0080} &  \textbf{0.1600} &                                  \textbf{0.8870} &                                   \textbf{0.7030} \\
fCBT Prs. & 0.0165 &           0.0253 &           0.0029 &           0.0580 &                                           0.4759 &                                            0.3690 \\
fCBT Cos. & 0.0144 &           0.0203 &           0.0021 &           0.0420 &                                           0.0852 &                                            0.0350 \\
CBT Prs. & 0.0028 &           0.0057 &           0.0008 &           0.0160 &                                           0.6735 &                                            0.2630 \\
CBT Cos. & 0.0156 &           0.0218 &           0.0022 &           0.0440 &                                           0.0850 &                                            0.0340 \\
\hline
\hline
Fold 3 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0217} &  \textbf{0.0347} &  \textbf{0.0041} &  \textbf{0.0820} &                                           0.1604 &                                            0.0450 \\
Random & 0.0026 &           0.0077 &           0.0014 &           0.0280 &                                  \textbf{0.9800} &                                   \textbf{1.0000} \\
kNN Prs. & \textbf{0.0264} &  \textbf{0.0444} &  \textbf{0.0055} &  \textbf{0.1100} &                                  \textbf{0.9079} &                                   \textbf{0.8420} \\
kNN Cos. & \textbf{0.0468} &  \textbf{0.0735} &  \textbf{0.0085} &  \textbf{0.1700} &                                  \textbf{0.8596} &                                   \textbf{0.6650} \\
fCBT Prs. & 0.0153 &           0.0264 &           0.0034 &           0.0680 &                                           0.5627 &                                            0.5340 \\
fCBT Cos. & 0.0136 &           0.0250 &           0.0034 &           0.0680 &                                           0.1110 &                                            0.0340 \\
CBT Prs. & 0.0104 &           0.0172 &           0.0021 &           0.0420 &                                           0.3511 &                                            0.1450 \\
CBT Cos. & 0.0103 &           0.0179 &           0.0023 &           0.0460 &                                           0.0844 &                                            0.0340 \\
\hline
\end{tabulary}
\caption{Results of CBT experiment on preprocessed target dataset for cutoff 20 on MovieLens Hetrec 2011 (Sparse), with Netflix Prize as source domain. Higher values are better. Best results are in bold.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CC|}
\hline
\multicolumn{3}{|c|}{Netflix Prize $\rightarrow$ MovieLens Hetrec 2011 (Sparse)} \\
\hline
\hline
& mAP@20 & Difference is Significant \\
\hline
CBT Cos. & 0.0124 $\pm$ 0.0023 & \\
\hline
Random & 0.0039 $\pm$ 0.0010 & True \\
TopPop & 0.0192 $\pm$ 0.0018 & False \\
kNN Prs. & 0.0232 $\pm$ 0.0032 & False \\
kNN Cos. & 0.0470 $\pm$ 0.0016 & True \\
fCBT Prs. & 0.0161 $\pm$ 0.0006 & False \\
fCBT Cos. & 0.0136 $\pm$ 0.0007 & False \\
\hline
\hline
& mAP@20 & Difference is Significant \\
\hline
CBT Prs. & 0.0069 $\pm$ 0.0031 & \\
\hline
Random & 0.0039 $\pm$ 0.0010 & False \\
TopPop & 0.0192 $\pm$ 0.0018 & True \\
kNN Prs. & 0.0232 $\pm$ 0.0032 & True \\
kNN Cos. & 0.0470 $\pm$ 0.0016 & True \\
fCBT Prs. & 0.0161 $\pm$ 0.0006 & False \\
fCBT Cos. & 0.0136 $\pm$ 0.0007 & False \\
\hline
\end{tabulary}
\caption{Significance tests of CBT experiment on preprocessed target dataset for mAP@20 differences between CBT and baselines on MovieLens Hetrec 2011 (Sparse), with Netflix Prize as source domain.}
\end{table}

\clearpage



\section{CBT: Full Target Dataset (Netflix Prize to MovieLens Hetrec 2011)}

The following section covers CBT experiments performed on the full MovieLens Hetrec 2011 dataset, using Netflix Prize as the source domain.\\
Experiments are run over 10 folds for each combination of source and target domains.\\
The metrics of its results are reported with a cutoff of 20.\\
To compare the results, the following baseline recommender systems are used with the same datasets:
\begin{itemize}
\item \textbf{Random}: random items are chosen for recommendation.
\item \textbf{TopPop}: the most popular items are chosen for recommendation.
\item \textbf{kNN}: the same kNN approach used in CBT is applied without codebook transfer, on the original target dataset. Only cosine similarity is used and bayesian optimization is applied.
\end{itemize}


\subsection{Datasets}

\begin{itemize}
\item \textbf{MovieLens Hetrec 2011} \cite{grouplens, hetrec-2011}: 855,598 ratings by 2,113 users on 10,109 movies, with range 1 to 5.
\item \textbf{Netflix Prize} \cite{netflix-prize-dataset}: 100,480,507 ratings by 480,189 users on 17,770 movies, with range 1 to 5.
\end{itemize}
Netflix Prize is preprocessed to extract a very dense dataset to be used as source domain.\\
Preprocessing of the source domain is performed in multiple iterations. First by removing users with a low amount of interactions. Then by removing items with a low amount of interactions. The missing ratings of the source domain are filled with the average of ratings.\\
Finally, the preprocessed and full datasets used in the experiments have the following properties:\\
\begin{center}
\begin{tabulary}{1.0\textwidth}{|L|CCCC|}
\hline
\multicolumn{5}{|c|}{Source Domain} \\
\hline
& Density & Users & Items & Ratings \\
\hline
Netflix Prize & 56.77 & 500 & 500 & 141934 \\
\hline
\hline
\multicolumn{5}{|c|}{Target Domain} \\
\hline
& Density & Users & Items & Ratings \\
\hline
MovieLens Hetrec 2011 & 4.00 & 2113 & 10109 & 855598 \\
\hline
\end{tabulary}
\end{center}
The target dataset is split in training and test sets. To do so, a random rating for each user is removed from the dataset and added to the test set, while the remaining ratings form the training set.


\subsection{Hyperparameters}

The hyperparameters values are estimated based on the best results of the previous experiments.\\
The following hyperparameters are set:
\begin{itemize}
\item $\texttt{construct\_validation\_every\_n} = 1$: The amount of iterations after which the codebook construction loss is evaluated by the early stopping training.
\item $\texttt{construct\_lower\_validations\_allowed} = 2000$: The amount of consecutive iterations with loss higher than the best one after which the early stopping training for codebook construction stops.
\item $\texttt{maximum\_construct\_iterations} = 20000$: The maximum amount of iterations used for codebook constructions. If the early stopping training reaches this amount, it stops.
\item $\texttt{transfer\_attempts} = 30$: The amount of attempts to find a local minimum for codebook transfer.
\item $\texttt{maximum\_fill\_iterations} = 100$: The maximum amount of iterations used to find a mapping between the target domain and the codebook. The maximum amount is the same for each of the transfer attempts.
\item $\texttt{user\_clusters} = 5$: The amount of user cluster used to build the codebook.
\item $\texttt{item\_clusters} = 5$: The amount of item cluster used to build the codebook.
\item $\texttt{knn\_topk} = 550$: The amount of similar user to consider when computing similarity for kNN.
\item $\texttt{knn\_shrink} = 120$: Shrinkage to apply when computing the similarity for kNN.
\item $\texttt{knn\_similarity} = cosine$: The similarity type to use for kNN.
\item $\texttt{knn\_normalize} = false$: Whether to normalize when computing the similarity for kNN. Normalization is computed by dividing the dot product by the product of the norms.
\end{itemize}


\begin{figure}[htb]
  \centering
  \includegraphics[width=\textwidth]{pictures/movielens-full-target}
  \caption
  [Heatmap of the full MovieLens Hetrec 2011 training set.]
  {\protect\raggedright Heatmap of the full MovieLens Hetrec 2011 training set.}
  \includegraphics[width=\textwidth]{pictures/movielens-full-target-filled}
  \caption
  [Heatmap of the full MovieLens Hetrec 2011 training set filled with a codebook extracted from the Netflix Prize domain.]
  {\protect\raggedright Heatmap of the full MovieLens Hetrec 2011 training set filled with a codebook extracted from the Netflix Prize domain.}
\end{figure}


\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CCCCCC|}
\hline
\multicolumn{7}{|c|}{Netflix Prize $\rightarrow$ MovieLens Hetrec 2011 (Full)} \\
\hline
\hline
Fold 1 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 2 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 3 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 4 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 5 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\end{tabulary}
\caption{Results of CBT experiment on full target dataset for cutoff 20 on MovieLens Hetrec 2011 (Full), with Netflix Prize as source domain. The source domain is reduced in order to lower the sparsity. Higher values are better. Best results are in bold. Folds 1-5.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CCCCCC|}
\hline
\multicolumn{7}{|c|}{Netflix Prize $\rightarrow$ MovieLens Hetrec 2011 (Full)} \\
\hline
\hline
Fold 6 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 7 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 8 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 9 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 10 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\end{tabulary}
\caption{Results of CBT experiment on full target dataset for cutoff 20 on MovieLens Hetrec 2011 (Full), with Netflix Prize as source domain. The source domain is reduced in order to lower the sparsity. Higher values are better. Best results are in bold. Folds 6-10.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CC|}
\hline
\multicolumn{3}{|c|}{Netflix Prize $\rightarrow$ MovieLens Hetrec 2011 (Full)} \\
\hline
\hline
& mAP & Difference is Significant \\
\hline
CBT Cos. & 0.0000 $\pm$ 0.0000 & \\
\hline
Random & 0.0000 $\pm$ 0.0000 & True \\
TopPop & 0.0000 $\pm$ 0.0000 & True \\
kNN Cos. & 0.0000 $\pm$ 0.0000 & True \\
\hline
\end{tabulary}
\caption{Significance tests of CBT experiment on full target dataset for mAP@20 differences between CBT and baselines on MovieLens Hetrec 2011 (Full), with Netflix Prize as source domain. The source domain is reduced in order to lower the sparsity.}
\end{table}

\clearpage


\subsection{Ablation Study}

The ablation study for this experiment is performed in three different ways:
\begin{itemize}
\item \textbf{Source domain mix}: All the ratings of the source domain are shuffled without keeping rows and column relation.
\item \textbf{Random source domain}: A $500 \times 500$ source domain matrix is randomly generated with rating from 1 to 5.
\item \textbf{Source domain reduction}: One-tenth of the ratings of the source domain are removed before the source matrix is filled with the average of ratings.
\end{itemize}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CCCCCC|}
\hline
\multicolumn{7}{|c|}{Netflix Prize (Mixed) $\rightarrow$ MovieLens Hetrec 2011 (Full)} \\
\hline
\hline
Fold 1 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 2 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 3 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 4 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 5 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\end{tabulary}
\caption{Results of CBT experiment on full target dataset for cutoff 20 on MovieLens Hetrec 2011 (Full), with Netflix Prize as source domain. The source domain is reduced in order to lower the sparsity. Then, the source domain is mixed to perform the ablation study. Higher values are better. Best results are in bold. Folds 1-5.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CCCCCC|}
\hline
\multicolumn{7}{|c|}{Netflix Prize (Mixed) $\rightarrow$ MovieLens Hetrec 2011 (Full)} \\
\hline
\hline
Fold 6 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 7 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 8 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 9 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 10 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\end{tabulary}
\caption{Results of CBT experiment on full target dataset for cutoff 20 on MovieLens Hetrec 2011 (Full), with Netflix Prize as source domain. The source domain is reduced in order to lower the sparsity. Then, the source domain is mixed to perform the ablation study. Higher values are better. Best results are in bold. Folds 6-10.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CC|}
\hline
\multicolumn{3}{|c|}{Netflix Prize (Mixed) $\rightarrow$ MovieLens Hetrec 2011 (Full)} \\
\hline
\hline
& mAP & Difference is Significant \\
\hline
CBT Cos. & 0.0000 $\pm$ 0.0000 & \\
\hline
Random & 0.0000 $\pm$ 0.0000 & True \\
TopPop & 0.0000 $\pm$ 0.0000 & True \\
kNN Cos. & 0.0000 $\pm$ 0.0000 & True \\
\hline
\end{tabulary}
\caption{Significance tests of CBT experiment on full target dataset for mAP@20 differences between CBT and baselines on MovieLens Hetrec 2011 (Full), with Netflix Prize as source domain.  The source domain is mixed in order to lower the sparsity. Then, the source domain is mixed to perform the ablation study.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CCCCCC|}
\hline
\multicolumn{7}{|c|}{Random $\rightarrow$ MovieLens Hetrec 2011 (Full)} \\
\hline
\hline
Fold 1 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 2 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 3 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 4 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 5 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\end{tabulary}
\caption{Results of CBT experiment on full target dataset for cutoff 20 on MovieLens Hetrec 2011 (Full). The source domain is randomly generated to perform the ablation study. Higher values are better. Best results are in bold. Folds 1-5.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CCCCCC|}
\hline
\multicolumn{7}{|c|}{Random $\rightarrow$ MovieLens Hetrec 2011 (Full)} \\
\hline
\hline
Fold 6 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 7 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 8 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 9 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 10 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\end{tabulary}
\caption{Results of CBT experiment on full target dataset for cutoff 20 on MovieLens Hetrec 2011 (Full). The source domain is randomly generated to perform the ablation study. Higher values are better. Best results are in bold. Folds 6-10.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CC|}
\hline
\multicolumn{3}{|c|}{Random $\rightarrow$ MovieLens Hetrec 2011 (Full)} \\
\hline
\hline
& mAP & Difference is Significant \\
\hline
CBT Cos. & 0.0000 $\pm$ 0.0000 & \\
\hline
Random & 0.0000 $\pm$ 0.0000 & True \\
TopPop & 0.0000 $\pm$ 0.0000 & True \\
kNN Cos. & 0.0000 $\pm$ 0.0000 & True \\
\hline
\end{tabulary}
\caption{Significance tests of CBT experiment on full target dataset for mAP@20 differences between CBT and baselines on MovieLens Hetrec 2011 (Full). The source domain is randomly generated to perform the ablation study.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CCCCCC|}
\hline
\multicolumn{7}{|c|}{Netflix Prize (Removal) $\rightarrow$ MovieLens Hetrec 2011 (Full)} \\
\hline
\hline
Fold 1 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 2 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 3 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 4 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 5 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\end{tabulary}
\caption{Results of CBT experiment on full target dataset for cutoff 20 on MovieLens Hetrec 2011 (Full), with Netflix Prize as source domain. The source domain is reduced in order to lower the sparsity. Then, random ratings removal is applied to the source domain to perform the ablation study. Higher values are better. Best results are in bold. Folds 1-5.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CCCCCC|}
\hline
\multicolumn{7}{|c|}{Netflix Prize (Removal) $\rightarrow$ MovieLens Hetrec 2011 (Full)} \\
\hline
\hline
Fold 6 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 7 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 8 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 9 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\hline
Fold 10 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
Random & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
kNN Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
CBT Cos. & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 & 0.0000 \\
\hline
\end{tabulary}
\caption{Results of CBT experiment on full target dataset for cutoff 20 on MovieLens Hetrec 2011 (Full), with Netflix Prize as source domain. The source domain is reduced in order to lower the sparsity. Then, random ratings removal is applied to the source domain to perform the ablation study. Higher values are better. Best results are in bold. Folds 6-10.}
\end{table}


\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CC|}
\hline
\multicolumn{3}{|c|}{Netflix Prize (Removal) $\rightarrow$ MovieLens Hetrec 2011 (Full)} \\
\hline
\hline
& mAP & Difference is Significant \\
\hline
CBT Cos. & 0.0000 $\pm$ 0.0000 & \\
\hline
Random & 0.0000 $\pm$ 0.0000 & True \\
TopPop & 0.0000 $\pm$ 0.0000 & True \\
kNN Cos. & 0.0000 $\pm$ 0.0000 & True \\
\hline
\end{tabulary}
\caption{Significance tests of CBT experiment on full target dataset for mAP@20 differences between CBT and baselines on MovieLens Hetrec 2011 (Full), with Netflix Prize as source domain. The source domain is reduced in order to lower the sparsity. Then, random ratings removal is applied to the source domain to perform the ablation study.}
\end{table}

\clearpage



\section{LKT-FM: Full Target Dataset (Netflix Prize to MovieLens Hetrec 2011)}

The following section covers LKT-FM experiments performed on the full MovieLens Hetrec 2011 dataset, using Netflix Prize as the source domain.\\
Experiments are run over 10 folds for each combination of source and target domains.\\
The metrics of its results are reported with a cutoff of 20.\\
To compare the results, the following baseline recommender systems are used with the same datasets:
\begin{itemize}
\item \textbf{Random}: random items are chosen for recommendation.
\item \textbf{TopPop}: the most popular items are chosen for recommendation.
\item \textbf{kNN}: the same kNN approach used in CBT is applied without codebook transfer, on the original target dataset. Only cosine similarity is used and bayesian optimization is applied.
\end{itemize}


\subsection{Datasets}

\begin{itemize}
\item \textbf{MovieLens Hetrec 2011} \cite{grouplens, hetrec-2011}: 855,598 ratings by 2,113 users on 10,109 movies, with range 1 to 5.
\item \textbf{Netflix Prize} \cite{netflix-prize-dataset}: 100,480,507 ratings by 480,189 users on 17,770 movies, with range 1 to 5.
\end{itemize}
Netflix Prize is preprocessed to extract a very dense dataset to be used as source domain.\\
Preprocessing of the source domain is performed in multiple iterations. First by removing users with a low amount of interactions. Then by removing items with a low amount of interactions. The missing ratings of the source domain are filled with the average of ratings.\\
Finally, the preprocessed and full datasets used in the experiments have the following properties:\\
\begin{center}
\begin{tabulary}{1.0\textwidth}{|L|CCCC|}
\hline
\multicolumn{5}{|c|}{Source Domain} \\
\hline
& Density & Users & Items & Ratings \\
\hline
Netflix Prize & 56.77 & 500 & 500 & 141934 \\
\hline
\hline
\multicolumn{5}{|c|}{Target Domain} \\
\hline
& Density & Users & Items & Ratings \\
\hline
MovieLens Hetrec 2011 & 4.00 & 2113 & 10109 & 855598 \\
\hline
\end{tabulary}
\end{center}
The target dataset is split in training and test sets. To do so, a random rating for each user is removed from the dataset and added to the test set, while the remaining ratings form the training set.


\subsection{Hyperparameters}

The hyperparameters values are estimated based on the best results of the previous experiments.\\
The following hyperparameters are set:
\begin{itemize}
\item $\texttt{construct\_validation\_every\_n} = 1$: The amount of iterations after which the codebook construction loss is evaluated by the early stopping training.
\item $\texttt{construct\_lower\_validations\_allowed} = 2000$: The amount of consecutive iterations with loss higher than the best one after which the early stopping training for codebook construction stops.
\item $\texttt{maximum\_construct\_iterations} = 20000$: The maximum amount of iterations used for codebook constructions. If the early stopping training reaches this amount, it stops.
\item $\texttt{transfer\_attempts} = 30$: The amount of attempts to find a local minimum for codebook transfer.
\item $\texttt{maximum\_fill\_iterations} = 100$: The maximum amount of iterations used to find a mapping between the target domain and the codebook. The maximum amount is the same for each of the transfer attempts.
\item $\texttt{user\_clusters} = 5$: The amount of user cluster used to build the codebook.
\item $\texttt{item\_clusters} = 5$: The amount of item cluster used to build the codebook.
\item $\texttt{knn\_topk} = 550$: The amount of similar user to consider when computing similarity for kNN.
\item $\texttt{knn\_shrink} = 120$: Shrinkage to apply when computing the similarity for kNN.
\item $\texttt{knn\_similarity} = cosine$: The similarity type to use for kNN.
\item $\texttt{knn\_normalize} = false$: Whether to normalize when computing the similarity for kNN. Normalization is computed by dividing the dot product by the product of the norms.
\end{itemize}


\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CCCCCC|}
\hline
\multicolumn{7}{|c|}{Netflix Prize $\rightarrow$ MovieLens Hetrec 2011 (Full)} \\
\hline
\hline
Fold 1 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0439} &  \textbf{0.0659} &  \textbf{0.0072} &  \textbf{0.1434} &                                  \textbf{0.7849} &                                            0.0376 \\
Random & 0.0007 &           0.0009 &           0.0001 &           0.0019 &                                  \textbf{0.9980} &                                   \textbf{0.9821} \\
kNN Cos. & \textbf{0.0662} &  \textbf{0.0924} &  \textbf{0.0092} &  \textbf{0.1846} &                                  \textbf{0.9448} &                                   \textbf{0.2198} \\
CBT Cos. & 0.0077 &           0.0116 &           0.0013 &           0.0256 &                                           0.5841 &                                            0.0817 \\
\hline
\hline
Fold 2 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0465} &  \textbf{0.0687} &  \textbf{0.0074} &  \textbf{0.1486} &                                  \textbf{0.7850} &                                            0.0376 \\
Random & 0.0002 &           0.0008 &           0.0001 &           0.0028 &                                  \textbf{0.9980} &                                   \textbf{0.9820} \\
kNN Cos. & \textbf{0.0663} &  \textbf{0.0930} &  \textbf{0.0094} &  \textbf{0.1884} &                                  \textbf{0.9448} &                                   \textbf{0.2175} \\
CBT Cos. & 0.0067 &           0.0109 &           0.0013 &           0.0260 &                                           0.5846 &                                            0.0816 \\
\hline
\hline
Fold 3 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0586} &  \textbf{0.0811} &  \textbf{0.0081} &  \textbf{0.1619} &                                  \textbf{0.7849} &                                            0.0375 \\
Random & 0.0002 &           0.0006 &           0.0001 &           0.0024 &                                  \textbf{0.9980} &                                   \textbf{0.9821} \\
kNN Cos. & \textbf{0.0705} &  \textbf{0.0967} &  \textbf{0.0095} &  \textbf{0.1898} &                                  \textbf{0.9451} &                                   \textbf{0.2164} \\
CBT Cos. & 0.0134 &           0.0191 &           0.0020 &           0.0393 &                                           0.5844 &                                            0.0806 \\
\hline
\hline
Fold 4 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0447} &  \textbf{0.0671} &  \textbf{0.0074} &  \textbf{0.1477} &                                  \textbf{0.7852} &                                            0.0377 \\
Random & 0.0009 &           0.0012 &           0.0001 &           0.0024 &                                  \textbf{0.9980} &                                   \textbf{0.9821} \\
kNN Cos. & \textbf{0.0656} &  \textbf{0.0901} &  \textbf{0.0088} &  \textbf{0.1770} &                                  \textbf{0.9447} &                                   \textbf{0.2156} \\
CBT Cos. & 0.0087 &           0.0133 &           0.0015 &           0.0303 &                                           0.5838 &                                            0.0785 \\
\hline
\hline
Fold 5 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0461} &  \textbf{0.0679} &  \textbf{0.0073} &  \textbf{0.1453} &                                  \textbf{0.7851} &                                            0.0375 \\
Random & 0.0003 &           0.0009 &           0.0002 &           0.0033 &                                  \textbf{0.9980} &                                   \textbf{0.9823} \\
kNN Cos. & \textbf{0.0661} &  \textbf{0.0906} &  \textbf{0.0088} &  \textbf{0.1770} &                                  \textbf{0.9447} &                                   \textbf{0.2146} \\
CBT Cos. & 0.0070 &           0.0119 &           0.0015 &           0.0298 &                                           0.5856 &                                            0.0849 \\
\hline
\end{tabulary}
\caption{Results of LKT-FM experiment on full target dataset for cutoff 20 on MovieLens Hetrec 2011 (Full), with Netflix Prize as source domain. The source domain is reduced in order to lower the sparsity. Higher values are better. Best results are in bold. Folds 1-5.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CCCCCC|}
\hline
\multicolumn{7}{|c|}{Netflix Prize $\rightarrow$ MovieLens Hetrec 2011 (Full)} \\
\hline
\hline
Fold 6 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0514} &  \textbf{0.0723} &  \textbf{0.0074} &  \textbf{0.1481} &                                  \textbf{0.7851} &                                            0.0376 \\
Random & 0.0001 &           0.0003 &           0.0000 &           0.0009 &                                  \textbf{0.9980} &                                   \textbf{0.9821} \\
kNN Cos. & \textbf{0.0670} &  \textbf{0.0925} &  \textbf{0.0093} &  \textbf{0.1850} &                                  \textbf{0.9446} &                                   \textbf{0.2149} \\
CBT Cos. & 0.0097 &           0.0141 &           0.0015 &           0.0293 &                                           0.5873 &                                            0.0848 \\
\hline
\hline
Fold 7 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0468} &  \textbf{0.0677} &  \textbf{0.0072} &  \textbf{0.1434} &                                  \textbf{0.7852} &                                            0.0378 \\
Random & 0.0007 &           0.0015 &           0.0002 &           0.0043 &                                  \textbf{0.9980} &                                   \textbf{0.9821} \\
kNN Cos. & \textbf{0.0615} &  \textbf{0.0869} &  \textbf{0.0089} &  \textbf{0.1784} &                                  \textbf{0.9446} &                                   \textbf{0.2190} \\
CBT Cos. & 0.0106 &           0.0143 &           0.0014 &           0.0274 &                                           0.5876 &                                            0.0833 \\
\hline
\hline
Fold 8 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0515} &  \textbf{0.0746} &  \textbf{0.0079} &  \textbf{0.1585} &                                  \textbf{0.7850} &                                            0.0378 \\
Random & 0.0001 &           0.0003 &           0.0000 &           0.0009 &                                  \textbf{0.9980} &                                   \textbf{0.9822} \\
kNN Cos. & \textbf{0.0678} &  \textbf{0.0912} &  \textbf{0.0088} &  \textbf{0.1765} &                                  \textbf{0.9447} &                                   \textbf{0.2144} \\
CBT Cos. & 0.0088 &           0.0132 &           0.0014 &           0.0289 &                                           0.5835 &                                            0.0767 \\
\hline
\hline
Fold 9 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0502} &  \textbf{0.0729} &  \textbf{0.0077} &  \textbf{0.1548} &                                  \textbf{0.7849} &                                            0.0378 \\
Random & 0.0004 &           0.0008 &           0.0001 &           0.0024 &                                  \textbf{0.9980} &                                   \textbf{0.9821} \\
kNN Cos. & \textbf{0.0716} &  \textbf{0.0964} &  \textbf{0.0093} &  \textbf{0.1850} &                                  \textbf{0.9451} &                                   \textbf{0.2203} \\
CBT Cos. & 0.0099 &           0.0142 &           0.0015 &           0.0298 &                                           0.5833 &                                            0.0784 \\
\hline
\hline
Fold 10 & mAP & nDCG & Precision & Recall & G. Div. & I. Cov. \\
\hline
TopPop & \textbf{0.0494} &  \textbf{0.0736} &  \textbf{0.0080} &  \textbf{0.1609} &                                  \textbf{0.7848} &                                            0.0379 \\
Random & 0.0002 &           0.0005 &           0.0001 &           0.0014 &                                  \textbf{0.9980} &                                   \textbf{0.9824} \\
kNN Cos. & \textbf{0.0696} &  \textbf{0.0962} &  \textbf{0.0096} &  \textbf{0.1917} &                                  \textbf{0.9444} &                                   \textbf{0.2137} \\
CBT Cos. & 0.0076 &           0.0114 &           0.0012 &           0.0246 &                                           0.5825 &                                            0.0767 \\
\hline
\end{tabulary}
\caption{Results of LKT-FM experiment on full target dataset for cutoff 20 on MovieLens Hetrec 2011 (Full), with Netflix Prize as source domain. The source domain is reduced in order to lower the sparsity. Higher values are better. Best results are in bold. Folds 6-10.}
\end{table}

\begin{table}[hbt]
\centering
\begin{tabulary}{\textwidth}{|L|CC|}
\hline
\multicolumn{3}{|c|}{Netflix Prize $\rightarrow$ MovieLens Hetrec 2011 (Full)} \\
\hline
\hline
& mAP & Difference is Significant \\
\hline
LKT-FM Cos. & 0.0015 $\pm$ 0.0009 & \\
\hline
Random & 0.0004 $\pm$ 0.0003 & True \\
TopPop & 0.0489 $\pm$ 0.0041 & True \\
kNN Cos. & 0.0672 $\pm$ 0.0027 & True \\
\hline
\end{tabulary}
\caption{Significance tests of LKT-FM experiment on full target dataset for mAP@20 differences between LKT-FM and baselines on MovieLens Hetrec 2011 (Full), with Netflix Prize as source domain. The source domain is reduced in order to lower the sparsity.}
\end{table}
